{% extends "base.html" %}
{% block body %}
<section class="">
  <div class="">
    <p>LibreOffice Screen Control Panel</p> 

    <p>Playlist</p>

    <button onclick="request('play');">Play presentation</button>
    <button onclick="request('pause');">Pause presentation</button>
    Note to self: Do we need these? (Android Remote)
    <button onclick="request('next');">Next presentation</button>
    <button onclick="request('previous');">Previous presentation</button>

    <div>
		<ul class="sortable">
        {% for item in playlist %}
            <li>
                {{item["file"]}}

                <a href="#" onclick="request('play_file', {{item.id}});">Play</a>
                <a href="#" onclick="request('download_file', {{item.id}});">Download</a>
                <a href="#" onclick="request('remove_file', {{item.id}});">Remove</a>
            </li>
        {% endfor %}
		</ul>
    </div>

    <table>
        <tr>
        <td>
            {{name}}
            <!-- <form method="post" action="/upload" enctype="multipart/form-data"> -->
            <!--     <input type="file" name="file"> -->
            <!--     <button type="submit" value="Upload"> -->
            <!--         Upload file -->
            <!--     </button> -->
            <!-- </form> -->
            {{id}}
        </td>
        </tr>
    </table>

    <p>Upload presentation</p>
    <form method="post" action="/upload" enctype="multipart/form-data">
        <input type="file" name="file">
        <button type="submit" value="Upload">
            Upload file
        </button>
    </form>

  </div>
</section>

<script type="text/javascript">
    sortable('.sortable');

    function request (type, file_id)
    {
        var r = new XMLHttpRequest();
        r.open("POST", '/'+type, true);
        r.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
        r.send("file_id="+file_id);
    }
</script>

{% endblock %}
